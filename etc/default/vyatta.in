#!/bin/bash

# declare configred Vyatta shell environment variables

# first set vars per args of the "source /etc/default/vyatta VAR=FOO"
_vyatta_extglob=$(shopt -p extglob)
shopt -s extglob
for arg ; do
    [[ $arg == *=* ]] && \
	eval declare -x $arg
done
eval $_vyatta_extglob
unset _vyatta_extglob

{
  # These declarations must go within braces in order to be able to silence
  # readonly variable errors.

    for var in prefix exec_prefix datarootdir ; do
	eval test -n \"\$$var\" \&\& _vyatta_save_$var=\$$var
    done
    
    prefix=@prefix@
    exec_prefix=@exec_prefix@
    datarootdir=@datarootdir@

    if test -z "$vyatta_prefix" ; then
	if test -n "@prefix@" ; then
	    declare -x -r vyatta_prefix=@prefix@
	else
	    declare -x -r vyatta_prefix=$vyatta_prefix
	fi
    fi
    if test -z "$vyatta_exec_prefix" ; then
	if test -n "@exec_prefix@" ; then
	    declare -x -r vyatta_prefix=@exec_prefix@
	else
	    declare -x -r vyatta_prefix=$vyatta_prefix
	fi
    fi
    if test -z "$vyatta_datarootdir" ; then
	if test -n "@datarootdir@" ; then
	    declare -x -r vyatta_datarootdir=@datarootdir@
	else
	    declare -x -r vyatta_datarootdir=$vyatta_prefix/share
	fi
    fi
    if test -z "$vyatta_bindir" ; then
	if test -n "@bindir@" ; then
	    declare -x -r vyatta_bindir=@bindir@
	else
	    declare -x -r vyatta_bindir=$vyatta_exec_prefix/bin
	fi
    fi
    if test -z "$vyatta_sbindir" ; then
	if test -n "@sbindir@" ; then
	    declare -x -r vyatta_sbindir=@sbindir@
	else
	    declare -x -r vyatta_sbindir=$vyatta_exec_prefix/sbin
	fi
    fi
    if test -z "$vyatta_libdir" ; then
	if test -n "@libdir@" ; then
	    declare -x -r vyatta_libdir=@libdir@
	else
	    declare -x -r vyatta_libdir=$vyatta_exec_prefix/lib
	fi
	fi
    if test -z "$vyatta_libexecdir" ; then
	if test -n "@libexecdir@" ; then
	    declare -x -r vyatta_libexecdir=@libexecdir@
	else
	    declare -x -r vyatta_libexecdir=$vyatta_exec_prefix/libexec
	    fi
    fi
    if test -z "$vyatta_datadir" ; then
	if test -n "@datadir@" ; then
	    declare -x -r vyatta_datadir=@datadir@
	else
	    declare -x -r vyatta_datadir=$vyatta_datarootdir
	    fi
    fi
    if test -z "$vyatta_htmldir" ; then
	if test -n "@htmldir@" ; then
	    declare -x -r vyatta_htmldir=@htmldir@
	else
	    declare -x -r vyatta_htmldir=$vyatta_datarootdir/html
	fi
	fi
    if test -z "$vyatta_infodir" ; then
	if test -n "@infodir@" ; then
	    declare -x -r vyatta_infodir=@infodir@
	else
	    declare -x -r vyatta_infodir=$vyatta_datarootdir/info
	fi
    fi
    if test -z "$vyatta_mandir" ; then
	if test -n "@mandir@" ; then
	    declare -x -r vyatta_htmldir=@mandir@
	else
		declare -x -r vyatta_htmldir=$vyatta_datarootdir/man
	fi
    fi
    if test -z "$vyatta_localedir" ; then
	if test -n "@localedir@" ; then
	    declare -x -r vyatta_localedir=@localedir@
	else
	    declare -x -r vyatta_localedir=$vyatta_datarootdir/locale
	fi
    fi
    if test -z "$vyatta_localstatedir" ; then
	if test -n "@localstatedir@" ; then
	    declare -x -r vyatta_localstatedir=@localstatedir@
	else
	    declare -x -r vyatta_localstatedir=$vyatta_prefix/var
	    fi
    fi
    if test -z "$vyatta_sharedstatedir" ; then
	if test -n "@sharedstatedir@" ; then
	    declare -x -r vyatta_sharedstatedir=@sharedstatedir@
	else
	    declare -x -r vyatta_sharedstatedir=$vyatta_prefix/com
	fi
    fi
    if test -z "$vyatta_sysconfdir" ; then
	if test -n "@sysconfdir@" ; then
	    declare -x -r vyatta_sysconfdir=@sysconfdir@
	else
	    declare -x -r vyatta_sysconfdir=$vyatta_prefix/etc
	fi
    fi

    if test -z "$vyatta_op_templates" ; then
	declare -x -r vyatta_op_templates=$vyatta_datadir/vyatta-op/templates
    fi
    if test -z "$vyatta_config_templates" ; then
	declare -x -r vyatta_config_templates=$vyatta_datadir/vyatta-config/templates
    fi
    if test -z "$vyatta_configdir" ; then
	declare -x -r vyatta_configdir=$vyatta_prefix/config
    fi

    for var in prefix exec_prefix datarootdir ; do
	eval test -n \"\$_vyatta_save_$var\" \&\& $var=\$_vyatta_save_$var
    done
    

} 2>/dev/null || :

export VYATTA_ACTIVE_CONFIGURATION_DIR=${vyatta_configdir}/active
export VYATTA_CHANGES_ONLY_DIR=${vyatta_configdir}/tmp/changes_only_$$
export VYATTA_TEMP_CONFIG_DIR=${vyatta_configdir}/tmp/new_config_$$
export VYATTA_CONFIG_TMP=${vyatta_configdir}/tmp/tmp_$$
export VYATTA_CONFIG_TEMPLATE=$vyatta_config_templatesdir
export VYATTA_EDIT_LEVEL=/
export VYATTA_TEMPLATE_LEVEL=/
export VYATTA_TAG_NAME=node.tag
export VYATTA_MOD_NAME=.modified

###  Local Variables:
###  mode: shell-script
###  End:
